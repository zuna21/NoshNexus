<div
  class="main-wrapper"
  *ngIf="chat"
  (click)="onSelectedChat()"
  matRipple
  [matRippleColor]="'var(--accent)'"
>
  <div class="first-col center">
    <div class="image-wrapper">
      <img
        src="{{
          chat.lastMessage.sender.profileImage ||
            'http://localhost:5000/images/default/default-profile.png'
        }}"
        alt="profile image"
        class="img"
        (load)="isProfileImageLoading = false"
      />
      <div
        class="online"
        [ngStyle]="{
          'background-color': chat.lastMessage.sender.isActive
            ? 'lightgreen'
            : 'lightgray'
        }"
      ></div>

      <div class="spinner-wrapper" *ngIf="isProfileImageLoading">
        <mat-spinner></mat-spinner>
      </div>
    </div>
  </div>
  <div class="second-col">
    <div class="chat-name center">{{ chat.name }}</div>
    <div class="message center">
      {{
        chat.lastMessage.content.length > 100
          ? (chat.lastMessage.content | slice : 0 : 100) + "..."
          : chat.lastMessage.content
      }}
    </div>
    <div class="footer">
      <div class="date">
        <mat-icon inline>schedule</mat-icon>
        <div>{{ chat.lastMessage.createdAt | timeAgo }}</div>
      </div>
      <div class="username">{{ chat.lastMessage.sender.username }}</div>
    </div>
  </div>

  <div class="background" *ngIf="!chat.isSeen"></div>
</div>
